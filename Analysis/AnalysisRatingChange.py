import sys
sys.path.insert(0, "..")

import json
from UISimulation.PpdUISimulationRequest import PpdUISimulationRequest
from Open.PpdOpenClient import PpdOpenClient


def analysis_rating_chagne():
    # localStorage.removeItem("ppdItem")
    # t = localStorage.getItem("ppdItem") || "[]"; t = JSON.parse(t); $.each($(".listingId"), (key, value) => t.push(parseInt($(value).text()))); localStorage.setItem("ppdItem", JSON.stringify(t)); t

    with open("RatingChange.txt", "r") as f:
        t = f.readlines()
        listing_ids = [int(item.strip()) for item in t]

    print(len(listing_ids), listing_ids)

    cookies = "gr_user_id=11f8ea81-90aa-4c3e-a041-71c51c28ea51; uniqueid=747711b0-faee-473f-96e7-a488248ded5f; __fp=fp; __vid=3407234.1530775507276; _ppdaiWaterMark=15312861763999; _ga=GA1.2.1098278737.1530780657; ppdaiRole=8; openid=cdda7ce1e0bcfdaa2503c4f0770aabe4; ppd_uname=pdu8953799660; __utma=1.1098278737.1530780657.1537521814.1537844264.44; __utmz=1.1537844264.44.44.utmcsr=tz.ppdai.com|utmccn=(referral)|utmcmd=referral|utmcct=/investment-record/black-list; registerurl=https%3A%2F%2Fpay.ppdai.com%2Fdeposit%2Fprocessing%3Ftradeid%3D180925064000088903; registersourceurl=https%3A%2F%2Fppdai.cloud.cmbchina.com%2Frecharge%3Fsecret%3Duk1g%252biiu7tt00un1wddj1pecynqmvolok10tfxjv%252bsr0bvxfper%252bgrn3td7d3k3laz9tsjtuutva%252fyngsrscmze6c6m6nqtj5ufk5lx2pojvdwpfonod1zgditv5ehljjyxbvxjhuufqaz50o6zlv3oody57k7sojgmtmr5fjkhmafq5u6vbcqxhgzbr9hq2locwkazfzrbptptqvv02fecslnjehnpautnegau%252bcvqg0npcadupre54jeyolwqzf7ncz83ewwxb%252fsm%252bgv4fhv51vr%252b6qvx%252b7upuv6zfqghshyd6fnubj1yesytrx6xrezdkub2odexsc9qiz2rdqd0qi%252bqcforpgy6%252btyy3%252f%252bt%252balnrhz8fiv8chwx8ld0a10xogvudq4h%252filshktwz0t%252fnbise7i5dgsmvxis9orl4s0v%252bwkklmaq1i0s9se01mw9h5jg58hvxy%252bpbycej3hp7chqdfhwg%252bncxfn%252bbafcu5ehvgx%252fn4%252fizbee2x1jdahtshkqtelmrwoazzba8luzsvi0hty2nxklynjswqsg4vibvmx4urzim9t%252f%252begr%252fs9c5yizcdq%252f3m2wkncyw5iqk2vs3%252bqf%252bxsxei37oeyu7u0ayjxxr7ikeezguoofllynhsbwz%252bzkpqzhtfuo%252fmz%252byah3p5ix6f8xa1zmnlte%253d; Hm_lvt_aab1030ecb68cd7b5c613bd7a5127a40=1537154152,1537521815,1537521846,1537844293; regSourceId=0; referID=0; fromUrl=https%3A%2F%2Fwww.ppdai.com%2Fmoneyhistory; referDate=2018-10-8%2010%3A44%3A40; noticeflag=true; sensorsdata2015jssdkcross=%7B%22distinct_id%22%3A%22pdu8953799660%22%2C%22%24device_id%22%3A%221646959503432e-09fcbfb7c16c45-5b193613-2304000-16469595035ae%22%2C%22first_id%22%3A%221646959503432e-09fcbfb7c16c45-5b193613-2304000-16469595035ae%22%2C%22props%22%3A%7B%22%24latest_traffic_source_type%22%3A%22%E7%9B%B4%E6%8E%A5%E6%B5%81%E9%87%8F%22%2C%22%24latest_referrer%22%3A%22%22%2C%22%24latest_referrer_host%22%3A%22%22%2C%22%24latest_search_keyword%22%3A%22%E6%9C%AA%E5%8F%96%E5%88%B0%E5%80%BC(%E7%9B%B4%E6%8E%A5%E6%89%93%E5%BC%80)%22%7D%7D; __vsr=1539655504772.src%3Ddirect%7Cmd%3Ddirect%7Ccn%3Ddirect%3B1539666456849.refSite%3Dhttps%3A//tz.ppdai.com/account/indexV2%7Cmd%3Dreferral%7Ccn%3Dreferral%3B1539669411885.src%3Ddirect%7Cmd%3Ddirect%7Ccn%3Ddirect%3B1539673759471.refSite%3Dhttps%3A//www.ppdai.com/moneyhistory%7Cmd%3Dreferral%7Ccn%3Dreferral%3B1539743507367.src%3Ddirect%7Cmd%3Ddirect%7Ccn%3Ddirect; Hm_lvt_f87746aec9be6bea7b822885a351b00f=1537339527,1539574208,1539743508; token=7cddd068594dfea0e1aa6a7ef7093f57ee79fa9d6e9794d11b3fccbc93ade9d562e9cc5d2585d06db2; __eui=Cel3wwogQQUMvl7O%2BveuJQ%3D%3D; __tsid=262473610; aliyungf_tc=AQAAAG4qv2/EfwMAjlD3PL+lxOxQtKu6; gr_session_id_b9598a05ad0393b9=dddda42b-d10f-42ca-8ef9-57e90d7074d3; gr_session_id_b9598a05ad0393b9_dddda42b-d10f-42ca-8ef9-57e90d7074d3=true; gr_cs1_dddda42b-d10f-42ca-8ef9-57e90d7074d3=user_name%3Afell_2015; currentUrl=https%3A%2F%2Finvdebt.ppdai.com%2Fnegotiable%2Fapply%3Fowingnumber%3D%26sort%3D7%26level%3D%2Cb%2C%26dueday%3D%26minprincipal%3D%26maxprincipal%3D%26rate%3D%26pageindex%3D3; __sid=1539915059846.16.1539915469344; Hm_lpvt_f87746aec9be6bea7b822885a351b00f=1539915469; waterMarkTimeCheck1=10%2F19%2F2018+10%3A17%3A50"
    client = PpdUISimulationRequest(cookies=cookies)

    json_data_str = client.pre_apply_list(listing_ids)
    # B  1018
    # json_data_str = '{"code":1,"data":{"applyDebtList":[{"allowanceRadio":0.00,"currentCreditCode":"A","listingId":124445114,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.01,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":124465513,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.01,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":124543055,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.01,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":125082592,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":33.93,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":124559643,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.01,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"A","listingId":122589768,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.16,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":122494470,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.17,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":124253672,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.02,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":123781759,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.07,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":124026236,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.05,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":124911329,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":16.98,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"E","listingId":125069109,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":33.93,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":124302082,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.02,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":122786123,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.15,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"A","listingId":124344434,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.02,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":124379662,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.02,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":124436454,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.01,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":128653294,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.01,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"A","listingId":124442494,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.01,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"D","listingId":125789884,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.61,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"E","listingId":125716282,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.63,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":123400381,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.10,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":124468731,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.01,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":124523859,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.01,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":125021235,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":16.97,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":125022241,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":16.97,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":122368580,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.18,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":125009173,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":16.97,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":126743391,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.40,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":124630670,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":35.39,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"G","listingId":125497187,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.68,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"D","listingId":125329459,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":27.79,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":127792658,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.17,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":125609712,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":33.84,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"G","listingId":125581093,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.66,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":126247275,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.52,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":127915178,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.15,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"E","listingId":125525118,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.68,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"A","listingId":122473652,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.17,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":123725579,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.07,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":125709797,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":33.82,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":123784481,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.07,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"D","listingId":124948173,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":33.94,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":123854215,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":12.63,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":122032181,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.21,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":124885588,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":16.98,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"E","listingId":125528172,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.68,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":124995427,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":16.97,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":125223017,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":33.91,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"F","listingId":126654611,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.42,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":125538925,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":33.85,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"F","listingId":126768957,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.41,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"D","listingId":125294480,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":33.89,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"D","listingId":127108374,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":46.49,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":123980790,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.05,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"E","listingId":126620082,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.44,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":126089939,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.54,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":126304624,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.50,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"G","listingId":127328288,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.29,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":125699690,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.63,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":122099221,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.20,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":124127019,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.04,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":125277873,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":33.89,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":124143964,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.04,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":128178074,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.11,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"A","listingId":124190227,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.03,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"E","listingId":127376950,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":16.90,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":125690664,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.63,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":125568671,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":33.84,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":128644389,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":33.62,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":126181116,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.52,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"A","listingId":124318708,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.02,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":122937655,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.14,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":128491377,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":33.64,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":126213935,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.52,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":128492836,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":33.64,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":125809420,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.61,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"D","listingId":126005308,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.57,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":127356766,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":24.96,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":122017519,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.21,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":129010397,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":41.95,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"E","listingId":126309387,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.50,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":129952089,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":41.79,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":124338941,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.02,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":125507640,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.68,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":122138640,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.20,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":126875400,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.37,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":131092969,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":32.98,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":125339460,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":33.89,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":127506196,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.25,"priceforsaleRate":20.00}],"rateMaxMultiples":20.00,"rateMinMultiples":0.00,"sumAllowanceRadio":0.00,"sumFee":13.10,"sumOwingAmount":2592.96,"sumPriceforsale":2609.04},"netCode":1}'

    # 当前逾期
    # {"code":1,"data":{"applyDebtList":[{"allowanceRadio":0.00,"currentCreditCode":"G","listingId":125257334,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":42.72,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":121727301,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.22,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":128608088,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":50.85,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":128493838,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":50.88,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":121611281,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.23,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":121463781,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.24,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":121514001,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.24,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":121372383,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.25,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"C","listingId":121365243,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.25,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"B","listingId":121401675,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":34.53,"priceforsaleRate":20.00},{"allowanceRadio":0.00,"currentCreditCode":"E","listingId":120974900,"maxRate":40.00,"minRate":20.00,"preDebtDealId":0,"priceforsale":17.28,"priceforsaleRate":20.00}],"rateMaxMultiples":20.00,"rateMinMultiples":0.00,"sumAllowanceRadio":0.00,"sumFee":1.51,"sumOwingAmount":294.55,"sumPriceforsale":299.69},"netCode":1}
    print(json_data_str)
    json_data = json.loads(json_data_str)

    count = 0
    for item in json_data["data"]["applyDebtList"]:
        if item["currentCreditCode"] in ["C", "D", "E", "F", "G"]:
            print(item["listingId"], "Changed to", item["currentCreditCode"], item["priceforsale"])
            count += 1

    print(count)

def main():
    analysis_rating_chagne()

    # open_client = PpdOpenClient(key_index=1)
    # open_client.batch_get_listing_info([])
    pass

if __name__ == "__main__":
    main()